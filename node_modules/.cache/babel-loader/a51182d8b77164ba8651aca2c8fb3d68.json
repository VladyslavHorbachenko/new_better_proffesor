{"ast":null,"code":"import _defineProperty from\"/Users/vladyslavhorbachenko/Desktop/FinalCall/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/vladyslavhorbachenko/Desktop/FinalCall/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/vladyslavhorbachenko/Desktop/FinalCall/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link}from'react-router-dom';import{axiosWithAuth}from\"../utils/axiosWithAuth\";import axios from'axios';import{StyledForm}from\"./RegisterForm\";import{Redirect,useHistory}from\"react-router\";var LoginForm=function LoginForm(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var handleChange=function handleChange(event){setInput(_objectSpread({},input,_defineProperty({},event.target.name,event.target.value)));};var switchRoute=function switchRoute(){return/*#__PURE__*/React.createElement(Redirect,{to:\"/student-list\"});};var login=function login(event){event.preventDefault();// const { push } = useHistory();\naxios.post('https://betterprofessorapp.herokuapp.com/api/auth/login',input).then(function(res){console.log(res);localStorage.setItem('token',res.data.token);localStorage.setItem('name',res.data.name);console.log(props.history);window.location.href='/student-list';switchRoute();// props.history.push('/student-list');\n// useHistory.push('student-list');\n})// .catch(err => console.log(err) ? alert(\"Success\") : alert(\"Check Input\"))\n.catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(StyledForm,{onSubmit:login},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Email:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autocomplete:\"nope\",value:input.email,name:\"email\",placeholder:\"...enter username\",onChange:handleChange}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{autocomplete:\"new-password\",type:\"password\",value:input.password,name:\"password\",placeholder:\"...enter password\",onChange:handleChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\"},\"LOG IN\"),/*#__PURE__*/React.createElement(\"div\",{className:\"create-acct\"},/*#__PURE__*/React.createElement(Link,{className:\"acct-link\",to:\"/register\"},\"Create an Account\"))));};export default LoginForm;","map":{"version":3,"sources":["/Users/vladyslavhorbachenko/Desktop/FinalCall/src/components /LoginForm.js"],"names":["React","useState","Link","axiosWithAuth","axios","StyledForm","Redirect","useHistory","LoginForm","props","email","password","input","setInput","handleChange","event","target","name","value","switchRoute","login","preventDefault","post","then","res","console","log","localStorage","setItem","data","token","history","window","location","href","catch","err"],"mappings":"iYAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,aAAR,KAA4B,wBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,KAAyB,gBAAzB,CACA,OAAQC,QAAR,CAAkBC,UAAlB,KAAmC,cAAnC,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,eACAR,QAAQ,CAAC,CAC9BS,KAAK,CAAC,EADwB,CAE9BC,QAAQ,CAAC,EAFqB,CAAD,CADR,wCAClBC,KADkB,eACZC,QADY,eAMzB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5BF,QAAQ,kBACDD,KADC,oBAEHG,KAAK,CAACC,MAAN,CAAaC,IAFV,CAEiBF,KAAK,CAACC,MAAN,CAAaE,KAF9B,GAAR,CAIH,CALD,CAOA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,mBAAQ,oBAAC,QAAD,EAAU,EAAE,CAAC,eAAb,EAAR,CACH,CAFD,CAIA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACL,KAAD,CAAW,CAErBA,KAAK,CAACM,cAAN,GAEA;AAEAjB,KAAK,CACAkB,IADL,CACU,yDADV,CACoEV,KADpE,EAEKW,IAFL,CAEU,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BJ,GAAG,CAACK,IAAJ,CAASC,KAAvC,EACAH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BJ,GAAG,CAACK,IAAJ,CAASZ,IAAtC,EACAQ,OAAO,CAACC,GAAR,CAAYjB,KAAK,CAACsB,OAAlB,EACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,eAAvB,CACAf,WAAW,GAEX;AACA;AAGH,CAdL,CAeI;AAfJ,CAgBKgB,KAhBL,CAgBW,SAAAC,GAAG,QAAIX,CAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ,CAAJ,EAhBd,EAkBH,CAxBD,CA0BA,mBACI,4CAEI,oBAAC,UAAD,EAAY,QAAQ,CAAEhB,KAAtB,eACI,6BAAO,OAAO,CAAC,MAAf,WADJ,cAEI,6BACI,IAAI,CAAE,MADV,CAEI,YAAY,CAAC,MAFjB,CAGI,KAAK,CAAER,KAAK,CAACF,KAHjB,CAII,IAAI,CAAC,OAJT,CAKI,WAAW,CAAC,mBALhB,CAMI,QAAQ,CAAEI,YANd,EAFJ,cAUI,6BAAO,OAAO,CAAC,MAAf,aAVJ,cAWI,6BACI,YAAY,CAAC,cADjB,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAEF,KAAK,CAACD,QAHjB,CAII,IAAI,CAAC,UAJT,CAKI,WAAW,CAAC,mBALhB,CAMI,QAAQ,CAAEG,YANd,EAXJ,cAmBI,8BAAQ,SAAS,CAAC,cAAlB,WAnBJ,cAqBI,2BAAK,SAAS,CAAC,aAAf,eACI,oBAAC,IAAD,EAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,CAAC,WAA/B,sBADJ,CArBJ,CAFJ,CADJ,CA8BH,CAzED,CA2EA,cAAeN,CAAAA,SAAf","sourcesContent":["import React,{useState} from \"react\";\nimport {Link} from 'react-router-dom'\nimport {axiosWithAuth} from \"../utils/axiosWithAuth\";\nimport axios from 'axios'\nimport {StyledForm} from \"./RegisterForm\";\nimport {Redirect, useHistory} from \"react-router\";\n\nconst LoginForm = (props) => {\n    const [input,setInput] = useState({\n        email:'',\n        password:''\n    })\n\n    const handleChange = (event) => {\n        setInput({\n            ...input,\n            [event.target.name]: event.target.value\n        })\n    }\n\n    const switchRoute = () => {\n        return  <Redirect to=\"/student-list\" />\n    }\n\n    const login = (event) => {\n\n        event.preventDefault();\n\n        // const { push } = useHistory();\n\n        axios\n            .post('https://betterprofessorapp.herokuapp.com/api/auth/login',input)\n            .then(res => {\n                console.log(res);\n                localStorage.setItem('token', res.data.token);\n                localStorage.setItem('name', res.data.name);\n                console.log(props.history);\n                window.location.href = '/student-list'\n                switchRoute();\n\n                // props.history.push('/student-list');\n                // useHistory.push('student-list');\n\n\n            })\n            // .catch(err => console.log(err) ? alert(\"Success\") : alert(\"Check Input\"))\n            .catch(err => console.log(err))\n\n    }\n\n    return(\n        <div>\n\n            <StyledForm onSubmit={login}>\n                <label htmlFor=\"name\">Email:</label>\n                <input\n                    type= 'text'\n                    autocomplete=\"nope\"\n                    value={input.email}\n                    name='email'\n                    placeholder='...enter username'\n                    onChange={handleChange}\n                />\n                <label htmlFor=\"name\">Password</label>\n                <input\n                    autocomplete=\"new-password\"\n                    type='password'\n                    value={input.password}\n                    name='password'\n                    placeholder='...enter password'\n                    onChange={handleChange}\n                />\n                <button className=\"login-button\">LOG IN</button>\n\n                <div className=\"create-acct\">\n                    <Link className=\"acct-link\" to=\"/register\">Create an Account</Link>\n                </div>\n            </StyledForm>\n        </div>\n    )\n}\n\nexport default LoginForm"]},"metadata":{},"sourceType":"module"}